log             none

label loop
variable run_flag equal 1

variable        vBufferPath     string  lmp/.temp/buffer
variable        vInPath         string  lmp/.temp/in
variable        vShutdownPath   string  lmp/.temp/shutdown


shell [ -f ${vInPath} ] && echo 1 > ${vBufferPath} || echo 0 > ${vBufferPath}
variable in_exist file ${vBufferPath}
if $(next(in_exist)) then &
  "include ${vInPath}" &
  "clear" &
  "shell rm ${vInPath}"

shell [ -f ${vShutdownPath} ] && echo 1 > ${vBufferPath} || echo 0 > ${vBufferPath}
variable shutdown_exist file ${vBufferPath}
if $(next(shutdown_exist)) then &
  "variable run_flag equal 0"

if "${run_flag}" then &
  "shell sleep 0.1s" &
  "jump SELF loop"
