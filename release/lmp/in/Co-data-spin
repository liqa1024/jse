log             none

variable        vT              equal   300
variable        vP              equal   0.0
variable        vTimestep       equal   0.0005
variable        vRunStep        equal   100000
variable        vThermoStep     equal   1000
variable        vDumpStep       equal   1000
variable        vSeed           equal   4587281
variable        vSeedSpin       equal   21
variable        vSeedLattice    equal   48279
variable        vInDataPath     string  lmp/.Co/data-in-Co500
variable        vOutDataPath    string  lmp/.Co/data-out-Co500
variable        vDumpPath       string  lmp/.Co/Co500.lammpstrj


units           metal
atom_style 	    spin
boundary        p p p

# necessary for the serial algorithm (sametag)
atom_modify 	map array

timestep        ${vTimestep}
read_data       ${vInDataPath}

pair_style      hybrid/overlay eam/alloy spin/exchange 4.0
pair_coeff      * * eam/alloy lmp/.potential/Co_PurjaPun_2012.eam.alloy Co
pair_coeff 	    * * spin/exchange exchange 4.0 0.0446928 0.003496 1.4885

velocity        all create ${vT} ${vSeed} dist gaussian mom yes rot yes


# compute and output options

compute 	    out_mag    all spin

variable 	    magx      equal c_out_mag[1]
variable 	    magy      equal c_out_mag[2]
variable 	    magz      equal c_out_mag[3]
variable 	    magnorm   equal c_out_mag[4]
variable 	    emag      equal c_out_mag[5]
variable 	    tmag      equal c_out_mag[6]

thermo          ${vThermoStep}
thermo_style    custom step v_magx v_magy v_magz v_magnorm v_emag pe v_tmag temp etotal press vol
thermo_modify   flush yes

compute 	    outsp all property/atom spx spy spz sp fmx fmy fmz
dump            1 all custom ${vDumpStep} ${vDumpPath} id type xs ys zs c_outsp[1] c_outsp[2] c_outsp[3] c_outsp[4] c_outsp[5] c_outsp[6] c_outsp[7]

fix             1 all nve/spin lattice moving
fix             2 all langevin/spin ${vT} 0.01 ${vSeedSpin}
fix             3 all langevin ${vT} ${vT} 0.1 ${vSeedLattice}
fix             4 all press/berendsen iso ${vP} ${vP} 1000.0

run             ${vRunStep}

write_data      ${vOutDataPath}
